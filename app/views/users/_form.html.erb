<% if @user.errors.any? %>
  <div class="alert alert-danger" id="error_explanation">
    <h2><%= pluralize(@user.errors.count, "error") %></h2>
    <ul>
      <% @user.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
  <hr/>
<% end %>

<div class="col-md-4">
  <%= form_for (controller.action_name == "login" ? login_users_path : @user) do |f| %>
    <div class="control-group form-group">
      <div class="controls">
        <label>Login:</label>
        <%= f.text_field :login, :class => "form-control" %>
        <p class="help-block"></p>
      </div>
    </div>
    <div class="control-group form-group">
      <div class="controls">
        <label>Password:</label>
        <%= f.password_field :password, :class => "form-control" %>
      </div>
    </div>
    <% if controller.action_name != "login" %>
      <div class="control-group form-group">
        <div class="controls">
          <label>Repeat password:</label>
          <%= f.password_field :password_confirmation, :class => "form-control" %>
        </div>
      </div>
      <%= f.submit "Sign up", :class => "btn btn-primary" %>
    <% else %>
      <%= f.submit "Login", :class => "btn btn-primary" %>
    <% end %>
  <% end %>
</div>
